import{ac as _,h as n,ae as l,af as o,aj as i,ag as s,ah as d,c as S,ap as f,aq as w,f as p,W as y,ai as m,ar as c,ak as I}from"./index.97bff0c1.js";import{Q as u}from"./QItemLabel.c7948ba6.js";import{Q as v,a as k,b as r}from"./QList.f9691a2b.js";import{Q as b}from"./QPage.e87dc99e.js";const Q={name:"MyShowsPage",data(){return{myShows:[]}},mounted(){sessionStorage.getItem("loggedIn")==="false"?(console.log("Not logged in, redirecting to login page"),this.$router.push("/login")):(console.log("Logged in, getting my shows"),sessionStorage.setItem("shrinkHeader","true"),this.$eventbus.emit("shrinkHeader","true"),this.getMyShows())},methods:{getMyShows(){console.log("In getMyShows");const e={authorization:sessionStorage.getItem("token")};this.$api.get("/api/get-my-shows",{headers:e}).then(t=>{console.log("get-my-shows response from server: ",t.data),this.myShows=t.data,console.log("this.myShows: ",this.myShows)}).catch(t=>{console.log("Error: ",t),this.logout()})},goToShow(e){console.log("In goToShow"),sessionStorage.setItem("show_id",e.id),sessionStorage.setItem("show_name",e.name),sessionStorage.setItem("show_year",e.year),sessionStorage.setItem("show_image_url",e.image_url),sessionStorage.setItem("show_thumbnail",e.thumbnail),sessionStorage.setItem("show_overview",e.overview),this.$router.push("/show/"+e.id)},addShows(){console.log("In addShows"),this.$router.push("/add-show")},logout(){this.$hello.logout("facebook",{force:!0}),console.log("Session loggedIn now: "+sessionStorage.getItem("loggedIn")),sessionStorage.setItem("loggedIn","false"),this.$eventbus.emit("loggedIn","false"),console.log("Session loggedIn now: "+sessionStorage.getItem("loggedIn")),this.$router.push("/login")}}},$={class:"col"},x=i("div",{class:"header"},"My Shows",-1),M={class:"column items-center q-pt-sm"};function C(e,t,B,L,g,h){return n(),l(b,{class:"flex flex-top"},{default:o(()=>[i("div",$,[x,i("div",M,[s(d,{onClick:h.addShows,label:"Add Shows to My List",color:"primary",class:"q-ma-md"},null,8,["onClick"])]),g.myShows.length>0?(n(),l(v,{key:0,class:"bg-white",separator:"",bordered:""},{default:o(()=>[(n(!0),S(w,null,f(g.myShows,a=>y((n(),l(k,{key:a.name},{default:o(()=>[s(r,null,{default:o(()=>[s(u,null,{default:o(()=>[m(c(a.name),1)]),_:2},1024)]),_:2},1024),s(r,null,{default:o(()=>[s(u,null,{default:o(()=>[m(c(a.year),1)]),_:2},1024)]),_:2},1024),s(r,null,{default:o(()=>[s(d,{onClick:N=>h.goToShow(a),flat:"",rounded:"",color:"primary",icon:"message"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[I]])),128))]),_:1})):p("",!0)])]),_:1})}var D=_(Q,[["render",C]]);export{D as default};
